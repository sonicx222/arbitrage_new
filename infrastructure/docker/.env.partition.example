# Partition Deployment Environment Configuration
# Copy this file to .env.partition and fill in the values
#
# Usage:
#   cp .env.partition.example .env.partition
#   docker-compose -f docker-compose.partition.yml --env-file .env.partition up -d
#
# @see ADR-003: Partitioned Chain Detectors
# @see docker-compose.partition.yml

# =============================================================================
# General Settings
# =============================================================================

# Logging level: debug, info, warn, error
LOG_LEVEL=info

# Coordinator region for cross-region health (aligned with Fly sjc = us-west1)
COORDINATOR_REGION=us-west1

# =============================================================================
# BSC Chain Configuration (asia-fast partition)
# =============================================================================

# WebSocket URL for BSC node
BSC_WS_URL=wss://bsc-mainnet.nodereal.io/ws/v1/YOUR_API_KEY

# RPC URL for BSC node (fallback)
BSC_RPC_URL=https://bsc-dataseed1.binance.org

# =============================================================================
# Polygon Chain Configuration (asia-fast partition)
# =============================================================================

# WebSocket URL for Polygon node
POLYGON_WS_URL=wss://polygon-mainnet.nodereal.io/ws/v1/YOUR_API_KEY

# RPC URL for Polygon node (fallback)
POLYGON_RPC_URL=https://polygon-rpc.com

# =============================================================================
# Avalanche Chain Configuration (asia-fast partition)
# =============================================================================

# WebSocket URL for Avalanche C-Chain
AVALANCHE_WS_URL=wss://api.avax.network/ext/bc/C/ws

# RPC URL for Avalanche C-Chain (fallback)
AVALANCHE_RPC_URL=https://api.avax.network/ext/bc/C/rpc

# =============================================================================
# Fantom Chain Configuration (asia-fast partition)
# =============================================================================

# WebSocket URL for Fantom
FANTOM_WS_URL=wss://wsapi.fantom.network

# RPC URL for Fantom (fallback)
FANTOM_RPC_URL=https://rpc.ftm.tools

# =============================================================================
# Arbitrum Chain Configuration (l2-turbo partition)
# =============================================================================

# WebSocket URL for Arbitrum node
ARBITRUM_WS_URL=wss://arb-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# RPC URL for Arbitrum node (fallback)
ARBITRUM_RPC_URL=https://arb1.arbitrum.io/rpc

# =============================================================================
# Optimism Chain Configuration (l2-turbo partition)
# =============================================================================

# WebSocket URL for Optimism node
# docker-compose.partition.yml requires these (fail-if-not-set)
OPTIMISM_WS_URL=wss://opt-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# RPC URL for Optimism node (fallback)
OPTIMISM_RPC_URL=https://mainnet.optimism.io

# Optional: Alchemy API key for automatic URL construction
# ALCHEMY_OPTIMISM_KEY=YOUR_ALCHEMY_API_KEY

# =============================================================================
# Base Chain Configuration (l2-turbo partition)
# =============================================================================

# WebSocket URL for Base node
BASE_WS_URL=wss://base-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# RPC URL for Base node (fallback)
BASE_RPC_URL=https://mainnet.base.org

# =============================================================================
# Ethereum Chain Configuration (high-value partition)
# =============================================================================

# WebSocket URL for Ethereum node
ETHEREUM_WS_URL=wss://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# RPC URL for Ethereum node (fallback)
ETHEREUM_RPC_URL=https://eth.llamarpc.com

# =============================================================================
# zkSync Era Chain Configuration (high-value partition)
# =============================================================================

# WebSocket URL for zkSync Era
ZKSYNC_WS_URL=wss://mainnet.era.zksync.io/ws

# RPC URL for zkSync Era (fallback)
ZKSYNC_RPC_URL=https://mainnet.era.zksync.io

# =============================================================================
# Linea Chain Configuration (high-value partition)
# =============================================================================

# WebSocket URL for Linea
LINEA_WS_URL=wss://rpc.linea.build

# RPC URL for Linea (fallback)
LINEA_RPC_URL=https://rpc.linea.build

# =============================================================================
# Solana Configuration (solana-native partition)
# =============================================================================

# RPC URL for Solana (mainnet-beta)
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com

# WebSocket URL for Solana
SOLANA_WS_URL=wss://api.mainnet-beta.solana.com

# =============================================================================
# Execution Engine Configuration
# =============================================================================

# Private keys for trade execution (KEEP SECURE!)
# These should be hot wallet keys with limited funds

ETHEREUM_PRIVATE_KEY=
BSC_PRIVATE_KEY=
ARBITRUM_PRIVATE_KEY=
BASE_PRIVATE_KEY=
POLYGON_PRIVATE_KEY=
OPTIMISM_PRIVATE_KEY=

# =============================================================================
# Redis Configuration
# =============================================================================

# Redis URL (default: redis://redis:6379 for docker-compose)
# REDIS_URL=redis://redis:6379

# =============================================================================
# Rate Limiting Configuration (ADR-024)
# =============================================================================

# Upstash Redis command limit (free tier: 10K commands/day)
# System uses 50:1 batching ratio for ~500K effective events/day
# UPSTASH_COMMANDS_PER_DAY=10000

# RPC rate limiting (token bucket algorithm)
# Default: 10 requests/second with burst of 20
# RPC_RATE_LIMIT_PER_SEC=10
# RPC_BURST_SIZE=20

# Solana Helius credits (if using Helius RPC)
# Free tier: 100K credits/day
# HELIUS_API_KEY=your_helius_api_key

# =============================================================================
# Service Port Mappings (Reference)
# =============================================================================
# These are the default port assignments. Override via environment variables
# if needed for your deployment configuration.
#
# Service                  Internal Port    External Port (docker-compose)
# -----------------------  -------------    ----------------------------
# Coordinator              3000             3000
# partition-asia-fast      3001             3011
# partition-l2-turbo       3001             3012
# partition-high-value     3001             3013
# cross-chain-detector     3001             3014
# execution-engine         3001             3015
# partition-solana         3001             3016
# Redis                    6379             6379

# =============================================================================
# Advanced Settings
# =============================================================================

# Override partition chains (comma-separated, optional)
# Use to run specific chains in a partition for testing
# PARTITION_CHAINS=bsc,polygon

# Health check port (default: 3001)
# HEALTH_CHECK_PORT=3001

# Enable cross-region health reporting (default: true)
# ENABLE_CROSS_REGION_HEALTH=true

# Redis port (default: 6379)
# REDIS_PORT=6379

# =============================================================================
# Failover Configuration (ADR-007)
# =============================================================================

# Health check interval in seconds (default: 15s per ADR-007)
# HEALTH_CHECK_INTERVAL=15

# Number of consecutive failures before triggering failover
# FAILOVER_THRESHOLD=3

# Alert webhook URL for failover notifications (optional)
# ALERT_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
