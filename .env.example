# =============================================================================
# Environment Configuration Template
# =============================================================================
# SETUP INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env.local
# 2. Fill in your API keys and configuration
# 3. NEVER commit .env or .env.local to git!
#
# For production: Use a secrets manager (AWS Secrets Manager, HashiCorp Vault)
# For CI/CD: Use GitHub Secrets or your CI provider's secret management
# =============================================================================

# -----------------------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------------------
NODE_ENV=development
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Service Ports
# -----------------------------------------------------------------------------
COORDINATOR_PORT=3000
P1_ASIA_FAST_PORT=3001
P2_L2_TURBO_PORT=3002
P3_HIGH_VALUE_PORT=3003
P4_SOLANA_PORT=3004
EXECUTION_ENGINE_PORT=3005
CROSS_CHAIN_DETECTOR_PORT=3006
UNIFIED_DETECTOR_PORT=3007

# -----------------------------------------------------------------------------
# Partition Configuration
# -----------------------------------------------------------------------------
PARTITION_ID=asia-fast
INSTANCE_ID=local-dev-1
REGION_ID=local

# =============================================================================
# RPC PROVIDER API KEYS
# =============================================================================
# Sign up for free tiers at each provider and add your keys below.
# See docs/reports/RPC_DEEP_DIVE_ANALYSIS.md for full strategy

# dRPC (https://drpc.org/)
DRPC_API_KEY=

# Ankr (https://www.ankr.com/rpc/)
ANKR_API_KEY=

# Infura (https://infura.io/)
INFURA_API_KEY=

# Alchemy (https://www.alchemy.com/)
ALCHEMY_API_KEY=

# QuickNode (https://www.quicknode.com/)
QUICKNODE_API_KEY=

# Helius - Solana (https://helius.xyz/)
HELIUS_API_KEY=

# Triton - Solana (https://triton.one/)
TRITON_API_KEY=

# Optional providers for extra redundancy
# BLAST_API_KEY=
# BLOCKPI_API_KEY=

# =============================================================================
# Per-Chain RPC URL Overrides (Optional)
# =============================================================================
# Leave commented to use API key-based URLs (recommended)
# Only uncomment if you need to force a specific endpoint

# ETHEREUM_RPC_URL=
# ETHEREUM_WS_URL=
# ARBITRUM_RPC_URL=
# ARBITRUM_WS_URL=
# BSC_RPC_URL=
# BSC_WS_URL=
# BASE_RPC_URL=
# BASE_WS_URL=
# POLYGON_RPC_URL=
# POLYGON_WS_URL=
# OPTIMISM_RPC_URL=
# OPTIMISM_WS_URL=
# AVALANCHE_RPC_URL=
# AVALANCHE_WS_URL=
# FANTOM_RPC_URL=
# FANTOM_WS_URL=
# ZKSYNC_RPC_URL=
# ZKSYNC_WS_URL=
# LINEA_RPC_URL=
# LINEA_WS_URL=
# SOLANA_RPC_URL=
# SOLANA_WS_URL=

# =============================================================================
# Simulation Mode (For Testing)
# =============================================================================
SIMULATION_MODE=false
SIMULATION_VOLATILITY=0.02
SIMULATION_UPDATE_INTERVAL_MS=1000
SIMULATION_MIN_PROFIT=50
SIMULATION_TIME_CRITICAL_MS=2000

# Execution simulation (no real blockchain transactions)
EXECUTION_SIMULATION_MODE=false
EXECUTION_SIMULATION_SUCCESS_RATE=0.85
EXECUTION_SIMULATION_LATENCY_MS=500
EXECUTION_SIMULATION_GAS_USED=200000
EXECUTION_SIMULATION_GAS_COST_MULTIPLIER=0.1
EXECUTION_SIMULATION_PROFIT_VARIANCE=0.2
EXECUTION_SIMULATION_LOG=true

# =============================================================================
# Arbitrage Configuration
# =============================================================================
MIN_PROFIT_PERCENTAGE=0.003
CONFIDENCE_THRESHOLD=0.75
MAX_GAS_PRICE_GWEI=50
CROSS_CHAIN_ENABLED=true
TRIANGULAR_ENABLED=true
MAX_TRIANGULAR_DEPTH=3
OPPORTUNITY_EXPIRY_MS=1000

# =============================================================================
# Coordinator Configuration
# =============================================================================
IS_STANDBY=false
CAN_BECOME_LEADER=true
LEADER_LOCK_KEY=coordinator:leader:lock
MAX_OPPORTUNITIES=1000
OPPORTUNITY_TTL_MS=60000
OPPORTUNITY_CLEANUP_INTERVAL_MS=10000
PAIR_TTL_MS=300000
ALERT_COOLDOWN_MS=300000
ENABLE_LEGACY_HEALTH_POLLING=false

# =============================================================================
# Execution Engine Configuration
# =============================================================================
EXECUTION_TIMEOUT_MS=55000
TRANSACTION_TIMEOUT_MS=50000
SHUTDOWN_TIMEOUT_MS=5000
PROVIDER_CONNECTIVITY_TIMEOUT_MS=5000
PROVIDER_HEALTH_CHECK_TIMEOUT_MS=5000
PROVIDER_RECONNECTION_TIMEOUT_MS=10000
QUEUE_PAUSED_ON_START=false
HEALTH_CHECK_INTERVAL_MS=10000
FAILOVER_THRESHOLD=3
FAILOVER_TIMEOUT_MS=60000
LEADER_HEARTBEAT_INTERVAL_MS=10000
LEADER_LOCK_TTL_MS=30000

# =============================================================================
# RPC Request Batching (Phase 3 Optimization)
# =============================================================================
# Enable JSON-RPC 2.0 batch requests to reduce HTTP overhead
# See RPC_DATA_OPTIMIZATION_IMPLEMENTATION_PLAN.md Phase 3
RPC_BATCHING_ENABLED=false
RPC_BATCH_MAX_SIZE=10
RPC_BATCH_TIMEOUT_MS=10
RPC_BATCH_MAX_QUEUE=100

# =============================================================================
# Circuit Breaker Configuration
# =============================================================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_COOLDOWN_MS=300000
CIRCUIT_BREAKER_HALF_OPEN_ATTEMPTS=1

# =============================================================================
# MEV Protection (Optional)
# =============================================================================
MEV_PROTECTION_ENABLED=false
MEV_SUBMISSION_TIMEOUT_MS=30000
MEV_MAX_RETRIES=3
MEV_FALLBACK_TO_PUBLIC=true
MEV_SIMULATE_BEFORE_SUBMIT=true

# MEV Provider Keys (required if MEV_PROTECTION_ENABLED=true)
# FLASHBOTS_AUTH_KEY=
# FLASHBOTS_RELAY_URL=https://relay.flashbots.net
# BLOXROUTE_AUTH_HEADER=
# BLOXROUTE_URL=https://mev.api.blxrbdn.com
# FASTLANE_URL=https://fastlane-rpc.polygon.technology

# =============================================================================
# Gas Price Limits per Chain (in Gwei)
# =============================================================================
GAS_PRICE_ETHEREUM_GWEI=50
GAS_PRICE_ARBITRUM_GWEI=0.1
GAS_PRICE_OPTIMISM_GWEI=0.001
GAS_PRICE_BASE_GWEI=0.001
GAS_PRICE_POLYGON_GWEI=100
GAS_PRICE_BSC_GWEI=5
GAS_PRICE_AVALANCHE_GWEI=25
GAS_PRICE_FANTOM_GWEI=100
GAS_PRICE_ZKSYNC_GWEI=0.25
GAS_PRICE_LINEA_GWEI=0.5

# =============================================================================
# Cross-Region Health
# =============================================================================
ENABLE_CROSS_REGION_HEALTH=false

# =============================================================================
# Alerts & Notifications (Optional)
# =============================================================================
# DISCORD_WEBHOOK_URL=
# SLACK_WEBHOOK_URL=

# =============================================================================
# Authentication & Security (Optional)
# =============================================================================
# JWT_SECRET=generate-a-secure-random-string-here
# JWT_EXPIRES_IN=1h
# API_KEYS=
# ALLOWED_ORIGINS=http://localhost:3000

# =============================================================================
# Transaction Simulation (Optional)
# =============================================================================
# TENDERLY_API_KEY=
# TENDERLY_ACCOUNT_SLUG=
# TENDERLY_PROJECT_SLUG=

# =============================================================================
# Feature Flags (Task 1.2: Batched Quoting)
# =============================================================================
# Enable batched quote fetching via MultiPathQuoter contract (default: false)
# When enabled: 75-83% latency reduction (150ms â†’ 50ms for 2-3 hop paths)
# Requires: MultiPathQuoter contract deployed on target chains
# Safe rollout: Start false, enable after deployment validation
# @see ADR-029: Batched Quote Fetching
FEATURE_BATCHED_QUOTER=false

# MultiPathQuoter contract addresses per chain (leave empty if not deployed)
# Deploy with: npx hardhat run scripts/deploy-multi-path-quoter.ts --network <chain>
# MULTI_PATH_QUOTER_ETHEREUM=
# MULTI_PATH_QUOTER_ARBITRUM=
# MULTI_PATH_QUOTER_BASE=
# MULTI_PATH_QUOTER_POLYGON=
# MULTI_PATH_QUOTER_OPTIMISM=
# MULTI_PATH_QUOTER_BSC=

# =============================================================================
# Private Keys for Execution (CRITICAL - Use Secrets Manager in Production!)
# =============================================================================
# WARNING: Never store real private keys in .env files!
# For local testing, generate test keys:
#   node -e "console.log(require('ethers').Wallet.createRandom().privateKey)"
#
# For production, use:
#   - AWS Secrets Manager
#   - HashiCorp Vault
#   - Azure Key Vault
#   - Google Secret Manager

# ETHEREUM_PRIVATE_KEY=
# BSC_PRIVATE_KEY=
# ARBITRUM_PRIVATE_KEY=
# BASE_PRIVATE_KEY=
# POLYGON_PRIVATE_KEY=
# OPTIMISM_PRIVATE_KEY=
